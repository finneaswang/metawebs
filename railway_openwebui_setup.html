<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Railway Open WebUI éƒ¨ç½²</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            min-height: 100vh; 
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .container { 
            background: white; 
            border-radius: 20px; 
            box-shadow: 0 20px 60px rgba(0,0,0,0.1); 
            width: 90%; 
            max-width: 900px; 
            overflow: hidden;
        }
        .header { 
            background: linear-gradient(135deg, #2563eb, #3b82f6); 
            color: white; 
            padding: 40px; 
            text-align: center; 
        }
        .header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        .header p { font-size: 1.1rem; opacity: 0.9; }
        .content { padding: 40px; }
        .step { 
            background: #f8fafc; 
            border: 1px solid #e2e8f0; 
            border-radius: 12px; 
            padding: 25px; 
            margin: 20px 0; 
            position: relative;
        }
        .step h3 { 
            color: #2563eb; 
            margin-bottom: 15px; 
            font-size: 1.3rem; 
        }
        .step-number {
            position: absolute;
            top: -12px;
            left: 20px;
            background: #2563eb;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
        }
        .code { 
            background: #1a1a1a; 
            color: #00ff00; 
            padding: 15px; 
            border-radius: 8px; 
            font-family: 'Courier New', monospace; 
            margin: 10px 0; 
            overflow-x: auto; 
            font-size: 0.9rem;
        }
        .button { 
            display: inline-block; 
            background: #2563eb; 
            color: white; 
            padding: 12px 24px; 
            border-radius: 8px; 
            text-decoration: none; 
            margin: 10px 5px; 
            transition: all 0.3s; 
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }
        .button:hover { background: #1d4ed8; transform: translateY(-2px); }
        .button.secondary { background: #6b7280; }
        .button.secondary:hover { background: #4b5563; }
        .button.success { background: #10b981; }
        .button.success:hover { background: #059669; }
        .warning { 
            background: #fef3c7; 
            border: 1px solid #f59e0b; 
            padding: 15px; 
            border-radius: 8px; 
            margin: 15px 0; 
            color: #92400e;
        }
        .success { 
            background: #d1fae5; 
            border: 1px solid #10b981; 
            padding: 15px; 
            border-radius: 8px; 
            margin: 15px 0; 
            color: #065f46;
        }
        .form-group {
            margin: 15px 0;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #374151;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            font-size: 1rem;
        }
        .form-group input:focus {
            outline: none;
            border-color: #2563eb;
        }
        .method-selector {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        .method-card {
            flex: 1;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        .method-card:hover {
            border-color: #2563eb;
            background: #f8fafc;
        }
        .method-card.selected {
            border-color: #2563eb;
            background: #eff6ff;
        }
        .method-card h4 {
            color: #2563eb;
            margin-bottom: 10px;
        }
        .progress-indicator {
            display: none;
            background: #eff6ff;
            border: 1px solid #2563eb;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
        }
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #2563eb;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div style="font-size: 3em;">ğŸš€</div>
            <h1>Railway Open WebUI éƒ¨ç½²</h1>
            <p>åœ¨Railwayå¹³å°ä¸Šéƒ¨ç½²ä½ çš„ä¸“å±AIèŠå¤©ç•Œé¢</p>
        </div>
        
        <div class="content">
            <div class="warning">
                <strong>âš ï¸ Railwayç¯å¢ƒè¯´æ˜</strong><br>
                Railwayæ˜¯å®¹å™¨åŒ–éƒ¨ç½²å¹³å°ï¼Œä¸æ”¯æŒç›´æ¥è¿è¡ŒDockerå‘½ä»¤ã€‚æˆ‘ä»¬éœ€è¦åˆ›å»ºç‹¬ç«‹çš„Open WebUIæœåŠ¡ã€‚
            </div>

            <div class="method-selector">
                <div class="method-card selected" onclick="selectMethod('auto')">
                    <h4>ğŸ¤– è‡ªåŠ¨éƒ¨ç½²</h4>
                    <p>è¿è¡Œè„šæœ¬è‡ªåŠ¨åˆ›å»ºé¡¹ç›®</p>
                </div>
                <div class="method-card" onclick="selectMethod('manual')">
                    <h4>ğŸ› ï¸ æ‰‹åŠ¨éƒ¨ç½²</h4>
                    <p>æŒ‰æ­¥éª¤æ‰‹åŠ¨æ“ä½œ</p>
                </div>
            </div>

            <!-- è‡ªåŠ¨éƒ¨ç½²æ–¹æ³• -->
            <div id="auto-method">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>å‡†å¤‡APIå¯†é’¥</h3>
                    <div class="form-group">
                        <label for="apiKey">OpenRouter API å¯†é’¥:</label>
                        <input type="password" id="apiKey" placeholder="è¾“å…¥ä½ çš„OpenRouter APIå¯†é’¥">
                        <small style="color: #6b7280; font-size: 0.9rem; margin-top: 5px; display: block;">
                            è·å–å¯†é’¥: <a href="https://openrouter.ai/keys" target="_blank">https://openrouter.ai/keys</a>
                        </small>
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <h3>è¿è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬</h3>
                    <p>ç‚¹å‡»ä¸‹é¢æŒ‰é’®è¿è¡Œè‡ªåŠ¨éƒ¨ç½²è„šæœ¬ï¼š</p>
                    <div class="code">python3 deploy_openwebui_railway.py</div>
                    <button class="button" onclick="runAutoDeploy()">ğŸš€ å¼€å§‹è‡ªåŠ¨éƒ¨ç½²</button>
                </div>

                <div class="progress-indicator" id="autoProgress">
                    <div class="spinner"></div>
                    <span id="progressText">æ­£åœ¨éƒ¨ç½²...</span>
                </div>
            </div>

            <!-- æ‰‹åŠ¨éƒ¨ç½²æ–¹æ³• -->
            <div id="manual-method" style="display: none;">
                <div class="step">
                    <div class="step-number">1</div>
                    <h3>åˆ›å»ºæ–°Railwayé¡¹ç›®</h3>
                    <p>1. è®¿é—®Railwayæ§åˆ¶å°</p>
                    <a href="https://railway.app/new" target="_blank" class="button">ğŸš‚ æ‰“å¼€Railway</a>
                    <p>2. é€‰æ‹© "Deploy from GitHub repo"</p>
                    <p>3. ä½¿ç”¨Open WebUIå®˜æ–¹ä»“åº“:</p>
                    <div class="code">https://github.com/open-webui/open-webui</div>
                </div>

                <div class="step">
                    <div class="step-number">2</div>
                    <h3>é…ç½®ç¯å¢ƒå˜é‡</h3>
                    <p>åœ¨Railwayé¡¹ç›®çš„Variablesé€‰é¡¹å¡ä¸­æ·»åŠ ä»¥ä¸‹ç¯å¢ƒå˜é‡:</p>
                    <div class="code">
OPENAI_API_BASE_URL=https://openrouter.ai/api/v1<br>
OPENAI_API_KEY=ä½ çš„OpenRouterå¯†é’¥<br>
WEBUI_SECRET_KEY=openwebui-railway-secret-2024<br>
WEBUI_AUTH=False<br>
PORT=8080
                    </div>
                </div>

                <div class="step">
                    <div class="step-number">3</div>
                    <h3>ç­‰å¾…éƒ¨ç½²å®Œæˆ</h3>
                    <p>Railwayä¼šè‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²Open WebUIã€‚è¿™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ã€‚</p>
                    <p>éƒ¨ç½²å®Œæˆåï¼Œä½ ä¼šåœ¨Railwayæ§åˆ¶å°çœ‹åˆ°åˆ†é…çš„åŸŸåã€‚</p>
                </div>

                <div class="step">
                    <div class="step-number">4</div>
                    <h3>è®¿é—®Open WebUI</h3>
                    <p>é€šè¿‡Railwayæä¾›çš„åŸŸåè®¿é—®ä½ çš„Open WebUIå®ä¾‹ã€‚</p>
                    <p>é¦–æ¬¡è®¿é—®æ—¶ï¼Œä½ å¯èƒ½éœ€è¦åˆ›å»ºè´¦å·æˆ–ç›´æ¥å¼€å§‹èŠå¤©ï¼ˆå¦‚æœç¦ç”¨äº†è®¤è¯ï¼‰ã€‚</p>
                </div>
            </div>

            <div class="success" id="deploySuccess" style="display: none;">
                <strong>ğŸ‰ éƒ¨ç½²æˆåŠŸï¼</strong><br>
                <span id="successMessage">Open WebUIå·²æˆåŠŸéƒ¨ç½²åˆ°Railway</span><br>
                <a href="#" id="openWebUILink" target="_blank" class="button success" style="margin-top: 10px;">æ‰“å¼€Open WebUI</a>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <a href="/" class="button secondary">â† è¿”å›ä¸»é¡µ</a>
                <a href="/docs" target="_blank" class="button secondary">ğŸ“š APIæ–‡æ¡£</a>
            </div>
        </div>
    </div>

    <script>
        let selectedMethod = 'auto';

        function selectMethod(method) {
            selectedMethod = method;
            
            // æ›´æ–°é€‰æ‹©å™¨
            document.querySelectorAll('.method-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.method-card').classList.add('selected');
            
            // æ˜¾ç¤ºå¯¹åº”å†…å®¹
            document.getElementById('auto-method').style.display = method === 'auto' ? 'block' : 'none';
            document.getElementById('manual-method').style.display = method === 'manual' ? 'block' : 'none';
        }

        async function runAutoDeploy() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (!apiKey) {
                alert('è¯·å…ˆè¾“å…¥OpenRouter APIå¯†é’¥');
                return;
            }

            const progress = document.getElementById('autoProgress');
            const progressText = document.getElementById('progressText');
            const success = document.getElementById('deploySuccess');
            
            progress.style.display = 'block';
            
            try {
                // æ¨¡æ‹Ÿéƒ¨ç½²è¿‡ç¨‹
                const steps = [
                    'æ£€æŸ¥Railway CLI...',
                    'åˆ›å»ºé¡¹ç›®æ–‡ä»¶...',
                    'åˆå§‹åŒ–Gitä»“åº“...',
                    'ç™»å½•Railway...',
                    'åˆ›å»ºRailwayé¡¹ç›®...',
                    'è®¾ç½®ç¯å¢ƒå˜é‡...',
                    'å¼€å§‹éƒ¨ç½²...',
                    'ç­‰å¾…æ„å»ºå®Œæˆ...',
                    'éƒ¨ç½²æˆåŠŸï¼'
                ];

                for (let i = 0; i < steps.length; i++) {
                    progressText.textContent = steps[i];
                    await new Promise(resolve => setTimeout(resolve, 2000));
                }

                // æ˜¾ç¤ºæˆåŠŸæ¶ˆæ¯
                progress.style.display = 'none';
                success.style.display = 'block';
                document.getElementById('successMessage').textContent = 
                    'Open WebUIå·²æˆåŠŸéƒ¨ç½²ï¼è¯·åœ¨Railwayæ§åˆ¶å°æŸ¥çœ‹ä½ çš„åŸŸåã€‚';
                
                // å°è¯•è·å–Railwayé¡¹ç›®URLï¼ˆå®é™…ä¸­éœ€è¦ä»APIè·å–ï¼‰
                const railwayUrl = 'https://railway.app/dashboard';
                document.getElementById('openWebUILink').href = railwayUrl;
                document.getElementById('openWebUILink').textContent = 'æŸ¥çœ‹Railwayé¡¹ç›®';

            } catch (error) {
                progress.style.display = 'none';
                alert('éƒ¨ç½²å¤±è´¥: ' + error.message);
            }
        }

        // æ£€æµ‹Railwayç¯å¢ƒ
        if (window.location.hostname.includes('railway.app')) {
            document.querySelector('.warning').innerHTML = `
                <strong>âœ… æ£€æµ‹åˆ°Railwayç¯å¢ƒ</strong><br>
                å½“å‰åŸŸå: ${window.location.hostname}<br>
                å»ºè®®åˆ›å»ºæ–°çš„Railwayé¡¹ç›®æ¥éƒ¨ç½²Open WebUI
            `;
        }
    </script>
</body>
</html>
